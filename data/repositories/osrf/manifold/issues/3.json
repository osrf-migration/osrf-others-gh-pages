{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/manifold.json"}, "html": {"href": "#!/osrf/manifold"}, "avatar": {"href": "data/bytebucket.org/ravatar/{95277805-c4cc-45bf-b4bb-ad6091e930a7}ts=c_plus_plus"}}, "type": "repository", "name": "manifold", "full_name": "osrf/manifold", "uuid": "{95277805-c4cc-45bf-b4bb-ad6091e930a7}"}, "links": {"attachments": {"href": "data/repositories/osrf/manifold/issues/3/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/manifold/issues/3.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/manifold/issues/3/watch"}, "comments": {"href": "data/repositories/osrf/manifold/issues/3/comments_page=1.json"}, "html": {"href": "#!/osrf/manifold/issues/3/latitude-and-longitude-angle-parsing"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/manifold/issues/3/vote"}}, "reporter": {"display_name": "Agustin Alba Chicar", "uuid": "{8bdb6c14-4455-4664-9346-942102361f75}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B8bdb6c14-4455-4664-9346-942102361f75%7D"}, "html": {"href": "https://bitbucket.org/%7B8bdb6c14-4455-4664-9346-942102361f75%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:53e8cbc5-23f1-4d62-aaaf-4a25ebc31c8f/07535b33-5cf2-4e10-bcd5-38bf6b994a6a/128"}}, "nickname": "agalbachicar", "type": "user", "account_id": "557058:53e8cbc5-23f1-4d62-aaaf-4a25ebc31c8f"}, "title": "Latitude and longitude angle parsing", "component": null, "votes": 0, "watches": 1, "content": {"raw": "We've (with @andres_fortier and @JChoclin ) found through the work on these issues:\r\n\r\n* [Issue #19](https://bitbucket.org/JChoclin/rndf_gazebo_plugin/issues/19): work through camera and coordinates of RNDF waypoints\r\n* [Issue #20](https://bitbucket.org/JChoclin/rndf_gazebo_plugin/issues/20): first detected and corrected below with sample RNDF files.\r\n\r\nThat latitude and longitude, at least from waypoints, is being parsed as radians instead of degrees. This causes that the construction of the ignition::math::SphericalCoordinates receives bad angles.\r\n\r\nI suggest doing the following:\r\n\r\n\r\n```\r\n#!c++\r\n\r\nignition::math::Angle lat(IGN_DTOR(latitude));\r\nignition::math::Angle lon(IGN_DTOR(longitude));\r\n```\r\nInstead of:\r\n\r\n```\r\n#!c++\r\n\r\nignition::math::Angle lat(latitude);\r\nignition::math::Angle lon(longitude);\r\n```\r\n\r\nIn line [130](#!/osrf/manifold/src/a49a7ea39816d9bf6f055aa3c6948fa5bbc69e99/src/rndf/Waypoint.cc?at=default&fileviewer=file-view-default#Waypoint.cc-130)\r\n\r\n\r\n", "markup": "markdown", "html": "<p>We've (with @andres_fortier and @JChoclin ) found through the work on these issues:</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"https://bitbucket.org/JChoclin/rndf_gazebo_plugin/issues/19\" rel=\"nofollow\">Issue #19</a>: work through camera and coordinates of RNDF waypoints</li>\n<li><a data-is-external-link=\"true\" href=\"https://bitbucket.org/JChoclin/rndf_gazebo_plugin/issues/20\" rel=\"nofollow\">Issue #20</a>: first detected and corrected below with sample RNDF files.</li>\n</ul>\n<p>That latitude and longitude, at least from waypoints, is being parsed as radians instead of degrees. This causes that the construction of the ignition::math::SphericalCoordinates receives bad angles.</p>\n<p>I suggest doing the following:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">math</span><span class=\"o\">::</span><span class=\"n\">Angle</span> <span class=\"n\">lat</span><span class=\"p\">(</span><span class=\"n\">IGN_DTOR</span><span class=\"p\">(</span><span class=\"n\">latitude</span><span class=\"p\">));</span>\n<span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">math</span><span class=\"o\">::</span><span class=\"n\">Angle</span> <span class=\"n\">lon</span><span class=\"p\">(</span><span class=\"n\">IGN_DTOR</span><span class=\"p\">(</span><span class=\"n\">longitude</span><span class=\"p\">));</span>\n</pre></div>\n\n\n<p>Instead of:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">math</span><span class=\"o\">::</span><span class=\"n\">Angle</span> <span class=\"n\">lat</span><span class=\"p\">(</span><span class=\"n\">latitude</span><span class=\"p\">);</span>\n<span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">math</span><span class=\"o\">::</span><span class=\"n\">Angle</span> <span class=\"n\">lon</span><span class=\"p\">(</span><span class=\"n\">longitude</span><span class=\"p\">);</span>\n</pre></div>\n\n\n<p>In line <a data-is-external-link=\"true\" href=\"#!/osrf/manifold/src/a49a7ea39816d9bf6f055aa3c6948fa5bbc69e99/src/rndf/Waypoint.cc?at=default&amp;fileviewer=file-view-default#Waypoint.cc-130\" rel=\"nofollow\">130</a></p>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2016-12-02T18:27:29.759462+00:00", "milestone": null, "updated_on": "2016-12-06T16:17:11.288293+00:00", "type": "issue", "id": 3}